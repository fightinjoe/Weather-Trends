var Color=function(c){var b=this;this.ATTRS={hex:null,triplet:null};var a=function(d){if(d.hex){b.ATTRS.hex=d.hex;b.ATTRS.triplet=b.toTriplet()}if(d.triplet){b.ATTRS.triplet=d.triplet;b.ATTRS.hex=b.toString()}};this.gradient=function(j,d){var g=b.ATTRS.triplet,f=j.ATTRS.triplet;var k=[(f[0]-g[0])/d,(f[1]-g[1])/d,(f[2]-g[2])/d];var e=[b];for(var h=0;h<d;h++){e.push(new Color({triplet:[g[0]+(k[0]*h),g[1]+(k[1]*h),g[2]+(k[2]*h)]}))}return e};this.toTriplet=function(){return[parseInt(b.ATTRS.hex.substr(0,2),16),parseInt(b.ATTRS.hex.substr(2,2),16),parseInt(b.ATTRS.hex.substr(4,2),16)]};this.toString=function(){var d=b.ATTRS.triplet,e;function f(g){e=Math.floor(d[g]).toString(16);return(("0"+e).substr(e.length-1,2))}return f(0)+f(1)+f(2)};(function(){a(c)}())};var Temps=function(b){var m=this;this.ATTRS={width:30,x:null,y:null,canvas:null,per10:6,step:null,minTemp:-10,margin:10};var h=[new Color({hex:"000000"}),new Color({hex:"9363F6"}),new Color({hex:"FFFFFF"}),new Color({hex:"2CE7FC"}),new Color({hex:"FEFB60"}),new Color({hex:"FF001A"}),new Color({hex:"8C0009"})];var k=null;this._g=function(){return k};this.drawTemp=function(n){var p=d("step"),r=m.snapToGrid(n.min,"min"),u=m.snapToGrid(n.max,"max");var w=f(r,u);var t=m.getWidth(r,u,n.offset);var o=true,x=[null,null,{x:t,y:0}],v=u,q;for(var s=0;s<w;s++){q=(v<=n.high&&v>=n.low)?"#"+l(v):null;x=o?g(x[2],q):c(x[2],q);o=!o;v=v-p}};var l=function(n){return k[Math.floor((n-d("minTemp"))/d("step"))]};var g=function(n,o){o=o||"#000000";var p=[n];p.push({x:n.x+d("x"),y:n.y});p.push({x:n.x+(d("x")/2),y:n.y+d("y")});p.push(n);j(p,{fillStyle:o});return p};var c=function(n,o){o=o||"#202020";var p=[n];p.push({x:n.x-(d("x")/2),y:n.y-d("y")});p.push({x:n.x-d("x"),y:n.y});p.push(n);j(p,{fillStyle:o});return p};var j=function(r,s){var q=d("canvas").getContext("2d"),n=r[0];for(var p in s){q[p]=s[p]}q.beginPath();q.moveTo(n.x,n.y);for(var o=1;o<r.length;o++){n=r[o];q.lineTo(n.x,n.y)}q.fill();if(s.strokeStyle){q.stroke()}q.closePath()};this.getHeight=function(o,n){return m.getWidth(o,n)*2*Math.sqrt(0.75)};this.getWidth=function(o,n,q){var p=Math.floor(f(o,n)/2)*(d("width")/2);if(q){p=p+q*(d("width")+d("margin"))}return p};var f=function(o,n){return Math.ceil((n-o)/d("step"))};this.snapToGrid=function(p,n){var o=d("step");return n=="min"?Math.floor(p/o)*o:Math.ceil(p/o)*o};this.degreeToPixel=function(n){return n*((d("width")*Math.sqrt(0.75)/2)*d("per10")/10)};var e=function(n){a("width",n.width,true);a("x",d("width")*1);a("y",d("width")*Math.sqrt(0.75));a("canvas",$(n.canvas)[0]);a("per10",n.per10,true);a("step",10/d("per10"));k=i()};var i=function(){var o=[],q=(d("per10")*2)-1,s,r;for(var p=1;p<h.length;p++){var n=h[p-1].gradient(h[p],q);o=o.concat(n)}o.push(h[h.length-1]);return o};var a=function(o,p,n){if(n&&!p){return}m.ATTRS[o]=p};var d=function(n){return m.ATTRS[n]};(function(){e(b)}())};var Chart=function(h){var c=this;this.ATTRS={max:null,min:null,temps:null,container:null,canvas:null};var b=function(k){a("max",k[0].high);a("min",k[0].low);for(var j=0;j<k.length;j++){a("max",Math.max(k[j].high,d("max")));a("min",Math.min(k[j].low,d("min")))}a("tempArray",k);e();f();g()};var e=function(){a("container",$('<div class="tempContainer"/>'));$("body").append(d("container"));var k=$("<canvas>Canvas support is required to view this app</canvas>");a("canvas",k);d("container").append(d("canvas"));var n=new Temps({canvas:k,width:35});a("temps",n);var j=a("min",n.snapToGrid(d("min"),"min")),o=a("max",n.snapToGrid(d("max"),"max")),p=d("tempArray").length,i=n.getWidth(j,o)+n.ATTRS.width*p+n.ATTRS.margin*(p-1),m=n.getHeight(j,o);k[0].width=i;k[0].height=m;a("width",i);a("height",m)};var f=function(){var l=$('<ul class="temps"/>').appendTo(d("container")),m=d("canvas");a("tempAxis",l);var p=Math.ceil(d("min")/10)*10,k=Math.floor(d("max")/10*10);for(var o=p;o<=k;o=o+10){var n=$("<li>"+o+"&deg;</li>").appendTo(l),j=d("temps").degreeToPixel((o)-d("min"));n.css({position:"absolute",bottom:j+"px",textAlign:"right",right:(d("width")-(j/Math.sqrt(0.75)*0.5))+"px"})}};var g=function(){var l=d("temps"),m=d("tempArray"),n=d("max"),j=d("min");for(var k=0;k<m.length;k++){l.drawTemp({max:n,min:j,high:m[k].high,low:m[k].low,offset:k})}};var a=function(j,k,i){if(i&&!k){return}c.ATTRS[j]=k;return k};var d=function(i){return c.ATTRS[i]};(function(){b(h)}())};